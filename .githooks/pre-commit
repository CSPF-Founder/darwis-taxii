#!/bin/sh
# Pre-commit hook: Run fmt and clippy checks
# Setup: git config core.hooksPath .githooks

set -e

echo "Checking formatting..."
cargo fmt --all --check || {
    echo "Format check failed. Run 'cargo fmt' to fix."
    exit 1
}

echo "Running clippy..."
SQLX_OFFLINE=true cargo clippy --workspace --all-targets -- -D warnings || {
    echo "Clippy check failed."
    exit 1
}

echo "Pre-commit checks passed!"
